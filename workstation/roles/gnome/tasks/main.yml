---
- name: install packagees
  become: yes
  community.general.pacman:
    name:
      - gdm
      - gimp           # image editor
      - gnome
      - gnome-firmware # frontend for fwupd
      - gnome-todo
      - gnome-tweaks
      - python-psutil  # needed for dconf module below
      - gnome-software-packagekit-plugin
      - ttf-fira-code
    state: present

- name: enable gdm
  become: yes
  ansible.builtin.systemd:
    name: gdm.service
    enabled: yes

- name: set xkb-options
  community.general.dconf:
    key: /org/gnome/desktop/input-sources/xkb-options
    value: "['lv3:ralt_switch', 'ctrl:nocaps']"

- name: set media keys
  community.general.dconf:
    key: "/org/gnome/settings-daemon/plugins/media-keys/{{ item.key }}"
    value: "{{ item.value | string }}"
  loop:
    - {key: "previous", value: "['<Super>comma']"}
    - {key: "next", value: "['<Super>period']"}
    - {key: "play", value: "['<Super>slash']"}
