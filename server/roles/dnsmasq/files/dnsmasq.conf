# Managed by ansible.  Do not modify

# --- General config
user=dnsmasq
group=netdev

interface=sfp0      # mgmt interface
interface=sfp0.2001 # trust interface
interface=sfp0.2004 # server interface
interface=sfp0.2012 # iot interface
conf-file=/usr/share/dnsmasq-base/trust-anchors.conf

# --- DNS config
domain-needed # don't forward requests without domain
bogus-priv    # dont' forward RFC1918 forward requests
#dnssec         # validate dns replies and cache data
no-resolv    # don't use /etc/resolv.conf for dns forward servers
expand-hosts # add domain to simple names in /etc/hosts

# dnss proxy
server=localhost#5353

#server=9.9.9.9
#server=149.112.112.112
#server=2620:fe::fe
#server=2620:fe::9

# default local domain
domain=purgatory.lan

# --- DHCP config
log-dhcp
dhcp-authoritative # assume and answer requests right away

# --- TFTP/PXE config
enable-tftp=sfp0.2001,sfp0.2004 # trust ans server interfaces
tftp-root=/srv/tftp
tftp-secure
dhcp-match=set:efi-x86_64,option:client-arch,7

conf-dir=/etc/dnsmasq.d/,*.conf
